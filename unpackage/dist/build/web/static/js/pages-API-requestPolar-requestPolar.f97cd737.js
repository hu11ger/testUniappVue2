(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-API-requestPolar-requestPolar"],{"1e28":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={pageHead:n("abc4").default},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("page-head",{attrs:{title:t.title}}),n("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[n("v-uni-view",{staticClass:"uni-hello-text"},[t._v("请点击按钮向服务器发起请求")]),n("v-uni-view",{staticClass:"uni-textarea uni-common-mt"},[n("v-uni-textarea",{attrs:{value:t.res}})],1),n("v-uni-view",{staticClass:"uni-btn-v uni-common-mt"},[n("v-uni-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendRequest("promise")}}},[t._v("授权终结点（Promise）")])],1),n("v-uni-view",[t._v(t._s(this.formData))])],1)],1)},i=[]},"5e38":function(t,e,n){"use strict";n.r(e);var a=n("1e28"),o=n("612a");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);var s=n("f0c5"),u=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=u.exports},"612a":function(t,e,n){"use strict";n.r(e);var a=n("99ce"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"99ce":function(t,e,n){"use strict";(function(t){n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{formData:"",title:"测试接入Polar",loading:!1,res:"",baseAuthUrl:"/api/oauth2/authorization",meshyAPI:"msy_ar8y9bKmstdLwmebSabtqBqnxbiZvsYLyIcX",inputHeader:{Authorization:"Bearer msy_ar8y9bKmstdLwmebSabtqBqnxbiZvsYLyIcX","Content - Type":"application/json"},inputArg:{image_url:"https://mp-4873eed2-c888-469f-becd-e538e287ac05.cdn.bspapp.com/bear.png",enable_pbr:!0},fbxURL:"",fbxLocalPath:"",resultID:""}},methods:{uploadModelFBX:function(){t.uploadFile({filePath:this.fbxLocalPath,cloudPath:"model.fbx",onUploadProgress:function(t){console.log(t);Math.round(100*t.loaded/t.total)},success:function(t){console.log(t),uni.showToast({title:"上传模型成功",icon:"success",duration:1e3})},fail:function(t){console.log("上传模型 fail",t),uni.showModal({content:t.errMsg,showCancel:!1})},complete:function(){}})},downloadModel:function(){var t=this;uni.showLoading({title:"下载中"}),uni.downloadFile({url:this.fbxURL,success:function(e){uni.showToast({title:"下载AI生成模型成功",icon:"success",duration:1e3}),console.log("下载AI生成模型成功",e),t.fbxLocalPath=e.tempFilePath,uni.hideLoading(),t.uploadModelFBX()},fail:function(t){console.log("下载AI生成模型失败",t)}})},getResult:function(){var t=this;this.loading=!0,uni.request({url:this.baseUrl+"/018e6c7f-7352-759b-8302-9dc94dab864b",method:"GET",header:{Authorization:"Bearer msy_ar8y9bKmstdLwmebSabtqBqnxbiZvsYLyIcX"}}).then((function(e){console.log("request success",e[1].data),uni.showToast({title:"查询成功",icon:"success",mask:!0,duration:2e3}),t.res="查询结果 : "+e[1].data,t.loading=!1,t.fbxURL=e[1].data.model_urls.fbx,t.downloadModel()}))},sendRequest:function(t){switch(this.loading=!0,t){case"promise":this._requestPromise();break;case"await":this._requestAwait();break;default:this._request();break}},_requestPromise:function(){var t=this;uni.request({url:this.baseAuthUrl,method:"GET",data:{response_type:"code",client_id:"d9b43148-dff9-4730-bf04-59d284efb671"}}).then((function(e){console.log("request success",e),t.formData=e[1].data,t.resultID=e[1].data.result,uni.showToast({title:"请求成功",icon:"success",mask:!0,duration:2e3}),t.res="请求结果 : "+e[1].data,t.loading=!1})).catch((function(e){console.log("request fail",e),uni.showModal({content:e.errMsg,showCancel:!1}),t.loading=!1}))}}};e.default=a}).call(this,n("a9ff")["default"])}}]);